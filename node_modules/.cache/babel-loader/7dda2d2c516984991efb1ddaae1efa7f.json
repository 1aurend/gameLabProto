{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _helpers = require('../helpers');\n\nrequire('./style.scss');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nfunction MonsterEye(_ref) {\n  var radius = _ref.radius,\n      offset = _ref.offset,\n      direction = _ref.direction;\n  var eyeballCenterX = radius * (1 + 0.4 * offset);\n  var eyeballCenterY = radius * 0.7;\n  var eyeballRadius = radius * 0.3;\n  var reverse = Math.pow(-1, (direction < 2) >> 0);\n  var vertical = direction % 2;\n  var horizontal = 1 - vertical;\n  var irisOffsetX = -horizontal * reverse;\n  var irisOffsetY = vertical * reverse;\n  var outerProps = {\n    cx: eyeballCenterX,\n    cy: eyeballCenterY,\n    'r': eyeballRadius,\n    fill: 'white'\n  };\n  var irisProps = {\n    cx: eyeballCenterX + eyeballRadius / 2 * irisOffsetX,\n    cy: eyeballCenterY + eyeballRadius / 2 * irisOffsetY,\n    'r': eyeballRadius / 2,\n    fill: 'black'\n  };\n  return _react2.default.createElement('g', {\n    className: 'eye'\n  }, _react2.default.createElement('circle', outerProps), _react2.default.createElement('circle', irisProps));\n}\n\nMonsterEye.propTypes = {\n  radius: _propTypes2.default.number.isRequired,\n  offset: _propTypes2.default.number.isRequired,\n  direction: _propTypes2.default.number.isRequired\n};\n\nfunction getMonsterPath(radius) {\n  var width = radius * 2;\n  var height = radius * 2;\n  var radiusSmall = radius / 5;\n  return ['M' + radius + ',0', 'A' + radius + ',' + radius + ' 0 0 1 ' + width + ',' + radius, 'L' + width + ',' + (height - radiusSmall), 'A' + radiusSmall + ',' + radiusSmall + ' 0 0 1 ' + (width - radiusSmall * 2) + ',' + (height - radiusSmall), 'A' + radiusSmall + ',' + radiusSmall + ' 0 0 0 ' + (width - radiusSmall * 4) + ',' + (height - radiusSmall), 'A' + radiusSmall + ',' + radiusSmall + ' 0 0 1 ' + (width - radiusSmall * 6) + ',' + (height - radiusSmall), 'A' + radiusSmall + ',' + radiusSmall + ' 0 0 0 ' + (width - radiusSmall * 8) + ',' + (height - radiusSmall), 'A' + radiusSmall + ',' + radiusSmall + ' 0 0 1 ' + (width - radiusSmall * 10) + ',' + (height - radiusSmall), 'L0,' + (height - radiusSmall), 'L0,' + radius, 'A' + radius + ',' + radius + ' 0 0 1 ' + radius + ',0'].join(' ');\n}\n\nfunction WaveMouth(_ref2) {\n  var gridSize = _ref2.gridSize,\n      eating = _ref2.eating;\n\n  if (!eating) {\n    return null;\n  }\n\n  var waveRadius = gridSize * 0.125;\n  var yPos = gridSize * 0.95;\n  var mouthPath = ['M' + waveRadius * 2 + ',' + yPos, 'A' + waveRadius + ',' + waveRadius * 5 + ' 0 0 1 ' + 3 * waveRadius + ',' + yPos, 'A' + waveRadius + ',' + waveRadius * 5 + ' 0 0 0 ' + 4 * waveRadius + ',' + yPos, 'A' + waveRadius + ',' + waveRadius * 5 + ' 0 0 1 ' + 5 * waveRadius + ',' + yPos, 'A' + waveRadius + ',' + waveRadius * 5 + ' 0 0 0 ' + 6 * waveRadius + ',' + yPos, 'A' + waveRadius + ',' + waveRadius * 5 + ' 0 0 1 ' + 7 * waveRadius + ',' + yPos, 'A' + waveRadius + ',' + waveRadius * 5 + ' 0 0 0 ' + 8 * waveRadius + ',' + yPos, 'A' + waveRadius + ',' + waveRadius * 5 + ' 0 0 1 ' + 9 * waveRadius + ',' + yPos, 'A' + waveRadius + ',' + waveRadius * 5 + ' 0 0 0 ' + 10 * waveRadius + ',' + yPos].join(' ');\n  return _react2.default.createElement('path', {\n    d: mouthPath,\n    stroke: 'white',\n    strokeWidth: 1\n  });\n}\n\nWaveMouth.propTypes = {\n  gridSize: _propTypes2.default.number.isRequired,\n  eating: _propTypes2.default.bool.isRequired\n};\n\nfunction getColor(eating, eatingFlash, color) {\n  if (eating) {\n    if (eatingFlash) {\n      return '#c9a';\n    }\n\n    return '#06c';\n  }\n\n  return color;\n}\n\nfunction MonsterIcon(_ref3) {\n  var gridSize = _ref3.gridSize,\n      eating = _ref3.eating,\n      eatingFlash = _ref3.eatingFlash,\n      position = _ref3.position,\n      direction = _ref3.direction,\n      color = _ref3.color;\n  var radius = gridSize * 0.75;\n  var monsterPath = getMonsterPath(radius);\n  var pathProps = {\n    stroke: 'none',\n    fill: getColor(eating, eatingFlash, color)\n  };\n\n  var style = _extends({}, (0, _helpers.cssPosition)(position, gridSize), {\n    width: radius * 2,\n    height: radius * 2,\n    marginLeft: -radius,\n    marginTop: -radius\n  });\n\n  return _react2.default.createElement('svg', {\n    className: 'pacman-monster',\n    style: style\n  }, _react2.default.createElement('path', _extends({\n    d: monsterPath\n  }, pathProps)), _react2.default.createElement(WaveMouth, {\n    gridSize: gridSize,\n    eating: eating\n  }), _react2.default.createElement(MonsterEye, {\n    radius: radius,\n    direction: direction,\n    offset: -1\n  }), _react2.default.createElement(MonsterEye, {\n    radius: radius,\n    direction: direction,\n    offset: 1\n  }));\n}\n\nMonsterIcon.propTypes = {\n  eating: _propTypes2.default.bool.isRequired,\n  eatingFlash: _propTypes2.default.number,\n  gridSize: _propTypes2.default.number.isRequired,\n  position: _propTypes2.default.array.isRequired,\n  color: _propTypes2.default.string.isRequired,\n  direction: _propTypes2.default.number.isRequired\n};\n\nvar Monster = function (_Component) {\n  _inherits(Monster, _Component);\n\n  function Monster(props) {\n    _classCallCheck(this, Monster);\n\n    var _this = _possibleConstructorReturn(this, (Monster.__proto__ || Object.getPrototypeOf(Monster)).call(this, props));\n\n    _this.state = {\n      eatingFlash: 0,\n      timerFlash: _this.getTimerFlash()\n    };\n    return _this;\n  }\n\n  _createClass(Monster, [{\n    key: 'getTimerFlash',\n    value: function getTimerFlash() {\n      var _this2 = this;\n\n      if (this.state) {\n        clearInterval(this.state.timerFlash);\n      }\n\n      if (!this.props.eatingTime) {\n        return null;\n      }\n\n      return setInterval(function () {\n        _this2.setState({\n          eatingFlash: (_this2.state.eatingFlash + 1) % 2\n        });\n      }, 500);\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.eatingTime > 0 && prevProps.eatingTime === 0 || this.props.eatingTime === 0 && prevProps.eatingTime > 0) {\n        this.setState({\n          timerFlash: this.getTimerFlash()\n        });\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      clearInterval(this.state.timerFlash);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      if (this.props.deadTime > 0) {\n        return null;\n      }\n\n      var _props = this.props,\n          eatingTime = _props.eatingTime,\n          props = _objectWithoutProperties(_props, ['eatingTime']);\n\n      var eating = eatingTime > 0;\n      return _react2.default.createElement(MonsterIcon, _extends({\n        eating: eating\n      }, props, this.state));\n    }\n  }]);\n\n  return Monster;\n}(_react.Component);\n\nMonster.propTypes = {\n  gridSize: _propTypes2.default.number.isRequired,\n  position: _propTypes2.default.array.isRequired,\n  direction: _propTypes2.default.number.isRequired,\n  color: _propTypes2.default.string.isRequired,\n  eatingTime: _propTypes2.default.number.isRequired,\n  deadTime: _propTypes2.default.number.isRequired\n};\nexports.default = Monster;","map":null,"metadata":{},"sourceType":"script"}